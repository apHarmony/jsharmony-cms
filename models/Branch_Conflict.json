{
  "Branch_Conflict": {
    "layout":"form",
    "table":"{schema}.branch",
    "onecolumn":true,
    "roles": {"PUBLISHER": "B","AUTHOR": "B", "VIEWER": "B"},
    "actions":"B",
    "caption":["Branch","Branches"],
    "title":"Branch Conflict",
    "onload":"_this.onload(xmodel, callback);",
    "buttons":[
      { "link":"js:_this.abortMerge(this)","icon":"delete","text":"Abort","class":"Branch_Conflict_buttonAbort", "roles": {"AUTHOR": "B","PUBLISHER": "B"} }
    ],
    "fields": [
      {"name":"branch_id","control":"hidden","key":true},
      {"name":"branch_merge_id","control":"hidden"},
      {"name":"merge_type","control":"hidden","unbound":true},
      {"name":"src_branch_desc","caption":"Merge From","control":"label","captionstyle":"font-weight:bold;text-align:right;","sqlselect":"(select branch_desc from {schema}.v_my_branch_desc src where src.branch_id = branch_merge_id)"},
      {"name":"dst_branch_desc","caption":"Merge To","control":"label","captionstyle":"font-weight:bold;text-align:right;","sqlselect":"(select branch_desc from {schema}.v_my_branch_desc dst where dst.branch_id = @branch_id)"},
      {"name":"branch_type","control":"hidden"}
    ]
  },
  "Branch_Conflict_Resolve_Page": {
    "layout":"form",
    "table":"{schema}.branch_page",
    "onecolumn":true,
    "roles": {"PUBLISHER": "BU","AUTHOR": "BU", "VIEWER": "B"},
    "actions":"BU",
    "caption":["Branch","Branches"],
    "title":"",
    "fields": [
      {"name":"branch_id","control":"hidden","key":true},
      {"name":"page_key","control":"hidden","key":true},
      {"name":"page_merge_id","caption":"Picked Page ID"},
      {"name":"branch_page_merge_action","caption":"Picked Action"}
    ]
  },
  "Branch_Conflict_Resolve_Media": {
    "layout":"form",
    "table":"{schema}.branch_media",
    "onecolumn":true,
    "roles": {"PUBLISHER": "BU","AUTHOR": "BU", "VIEWER": "B"},
    "actions":"BU",
    "caption":["Branch","Branches"],
    "title":"",
    "fields": [
      {"name":"branch_id","control":"hidden","key":true},
      {"name":"media_key","control":"hidden","key":true},
      {"name":"media_merge_id","caption":"Picked Media ID"},
      {"name":"branch_media_merge_action","caption":"Picked Action"}
    ]
  },
  "Branch_Conflict_Resolve_Redirect": {
    "layout":"form",
    "table":"{schema}.branch_redirect",
    "onecolumn":true,
    "roles": {"PUBLISHER": "BU","AUTHOR": "BU", "VIEWER": "B"},
    "actions":"BU",
    "caption":["Branch","Branches"],
    "title":"",
    "fields": [
      {"name":"branch_id","control":"hidden","key":true},
      {"name":"redirect_key","control":"hidden","key":true},
      {"name":"redirect_merge_id","caption":"Picked Redirect ID"},
      {"name":"branch_redirect_merge_action","caption":"Picked Action"}
    ]
  },
  "Branch_Conflict_Abort": {
    "layout": "exec",
    "title": "Abort Merge",
    "actions": "U",
    "roles": {"AUTHOR": "BU","PUBLISHER": "BU"},
    "sqlexec": "update {schema}.branch set branch_merge_id=null where branch_id=@branch_id",
    "fields": [
      {"name":"branch_id", "actions":"BU", "type":"bigint", "key": 1, "caption":"Branch ID", "validate": ["Required"]}
    ]
  }
}